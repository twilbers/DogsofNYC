filter(., startsWith(Emma, "O")) %>%
summarise(., n())
names2014 %>%
filter(., startsWith(Emma, "O")) %>%
count(.,)
count(.,)
names2014 %>%
filter(., unique(Emma)
names2014 %>%
names2014 %>%
filter(., unique(Emma))
names2014 %>%
distinct(., keep_all = FALSE)
names2014 %>%
distinct(., keep_all = FALSE)
names2014 %>%
distinct(., keep_all = FALSE)
names2014 %>%
distinct(.)
names2014 %>%
distinct(., Emma)
filter(., startsWith(Emma, "O")) %>%
count(.,)
names2014 %>%
distinct(., Emma) %>%
filter(., startsWith(Emma, "O")) %>%
count(.,)
names2014 %>%
distinct(., Emma, .keep_all = T) %>%
filter(., startsWith(Emma, "O")) %>%
count(.,)
names2014 %>%
distinct(., Emma, .keep_all = T) %>%
filter(., startsWith(Emma, "O"))
names2014 %>%
filter(., startsWith(Emma, "K")) %>%
summarise(., sum(X20799))
names2014 %>%
distinct(., Emma, .keep_all = T) %>%
filter(., startsWith(Emma, "G")) %>%
count(.,)
names2014$Emma["Jordan"]
names2014$Emma[names2014$Emma == "Jordan"]
names2014$Emma == "Jordan"
sum(names2014$Emma[names2014$Emma == "Jordan"])
sum(names2014$Emma[names2014$Emma == "Jordan"])
sum(names2014$Emma == "Jordan")
names2014 %>%
filter(., sum(names2014$Emma == Emma) > 1)
names2014
names2014 %>%
filter(., sum(names2014$Emma == Emma) > 1)
sum(names2014$Emma == Emma) > 1
names2014 %>%
filter(., sum(names2014$Emma == Emma) > 1)
names2014 %>%
group_by(., Emma) %>%
filter(.,n()>1)
names2014 %>%
group_by(., Emma) %>%
filter(.,n()>1) %>%
summarise(., sum(X20799))
names2014 %>%
group_by(., Emma) %>%
filter(.,n()>1) %>%
summarise(., sum(X20799))
summarise(., sum(X20799))
names2014 %>%
group_by(., Emma) %>%
filter(.,n()>1) %>%
summarise(., sum(X20799))
summarise(., sum(sum))
names2014 %>%
group_by(., Emma) %>%
filter(.,n()>1) %>%
ungroup(., Emma) %>%
summarise(., sum = sum(X20799))
names2014
names2014 %>%
group_by(., Emma) %>%
summarise(., sum = sum(X20799))
names2014 %>%
group_by(., Emma) %>%
summarise(., number = sum(X20799))
filter(., number > 5000 & number < 6000)
filter(., (number > 5000 & number < 6000))
names2014 %>%
group_by(., Emma) %>%
summarise(., number = sum(X20799))%>%
filter(., (number > 5000 & number < 6000))
names2014 %>%
mutate(., letter = substr(1,1,Emma))
names2014 %>%
mutate(., letter = substr(Emma, 1, 1))
names2014 %>%
mutate(., letter = substr(Emma, 1, 1)) %>%
group_by(., letter) %>%
summarise(., sum(X20799))
names2014 %>%
mutate(., letter = substr(Emma, 1, 1)) %>%
group_by(., letter) %>%
summarise(., number = sum(X20799)) %>%
ggplot(.,aes(x=letter,y=number,fill=letter))+
geom_bar(stat="identity",position="dodge")
names2014 %>%
mutate(., letter = substr(Emma, 1, 1)) %>%
group_by(., letter) %>%
summarise(., number = sum(X20799)) %>%
ggplot(.,aes(x=letter,y=number,fill=letter))+
geom_bar(stat="identity",position="dodge")
names2014 %>%
distinct(., Emma, .keep_all = T) %>%
filter(., startsWith(Emma, "G")) %>%
count(., n())
names2014 %>%
distinct(., Emma, .keep_all = T) %>%
filter(., startsWith(Emma, "G")) %>%
summarise(., n())
names2014 %>%
distinct(., Emma, .keep_all = T) %>%
filter(., startsWith(Emma, "G")) %>%
summarise(., total_g_names = n())
install.packages(googlevis)
install.packages("googlevis")
install.packages("googleVis")
demo(googleVis)
library(googleVis)
demo(googleVis)
scatter = gvisScatterChart(mtcars[,c("wt", "mpg")])
plot(scatter)
dt <- mtcars[,c("wt", "mpg")]
dt$cyl_4 <- ifelse(mtcars$cyl==4, dt$mpg, NA)
dt$cyl_4.html.tooltip <- rownames(dt)
dt$cyl_6 <- ifelse(mtcars$cyl==6, dt$mpg, NA)
dt$cyl_6.html.tooltip <- rownames(dt)
dt$cyl_8 <- ifelse(mtcars$cyl==8, dt$mpg, NA)
dt$cyl_8.html.tooltip <- rownames(dt)
dt$mpg <- NULL
head(dt)
plot(gvisScatterChart(dt,options=my_options))
plot(gvisScatterChart(dt,options=my_options))
plot(gvisScatterChart(dt,options=my_options)")
plot(gvisScatterChart(dt,options=my_options))
plot(gvisScatterChart(dt,options=my_options))
plot(gvisScatterChart(dt,options=my_options))
plot(gvisScatterChart(dt,options=my_options))
my_options$explorer <- "{actions:['dragToZoom', 'rightClickToReset']}"
my_options <- list(width="600px", height="300px",
title="Motor Trend Car Road Tests",
hAxis="{title:'Weight (1000 lbs)'}",
vAxis="{title:'Miles/(US) gallon'}")
my_options$explorer <- "{actions:['dragToZoom', 'rightClickToReset']}"
plot(gvisScatterChart(dt,options=my_options))
my_options
gvisScatterChart(dt,options=my_options)
dt
head(dt)
head(dt)
install.packages("leaflet")
install.packages("shinydashboard")
shiny::runApp('jails/chromium/Downloads/shinyTopics/dahsboard')
install.packages("later")
install.packages("chorddiag")
install.packages("later")
install.packages("rgdal")
q()
q()
q()
q()
library(dplyr)
library(wordcloud2)
library(ggplot2)
library(googleVis)
library(leaflet)
library(shiny)
library(maps)
library(rgdal)
library(broom)
library(zipcode)
setwd("~/code/bootcamp/shinyDogs/")
dogs = read.csv("NYC_Dog_Licensing_Dataset.csv")
data("zipcode")
sh <- readOGR("shape")
sh2 <- spTransform(sh, CRS("+proj=longlat +datum=WGS84"))
dc = dogs_count %>%
filter(., ZipCode %in% sh2$ZIPCODE)
ndf = sh2_df %>%
mutate(., ZIPCODE = as.integer(as.character(ZIPCODE))) %>%
left_join(x = ., y = dc)
ndf = sh2@data %>%
mutate(., ZIPCODE = as.integer(as.character(ZIPCODE))) %>%
left_join(x = ., y = dc)
dogs_count = dogs %>%
group_by(., ZipCode) %>%
summarise(., num_dogs = n()) %>%
mutate(., ZIPCODE = ZipCode)
dc = dogs_count %>%
filter(., ZipCode %in% sh2$ZIPCODE)
ndf = sh2@data %>%
mutate(., ZIPCODE = as.integer(as.character(ZIPCODE))) %>%
left_join(x = ., y = dc)
sh2@data$num_dogs = ndf$num_dogs
pal = colorNumeric(palette = "OrRd",
domain = range(sh2@data$num_dogs, na.rm=T), alpha = 10)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~num_dogs, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~num_dogs, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~num_dogs, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs, na.rm=T), alpha = 10)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs/sh2@data$POPULATION, na.rm=T), alpha = 10)
range(sh2@data$num_dogs/sh2@data$POPULATION, na.rm=T)
sh2@data$num_dogs/sh2@data$POPULATION
sh2@data$POPULATION
sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0, 1, POPULATION))
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0, 1, POPULATION))
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs/sh2@data$POPULATION, na.rm=T), alpha = 10)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/POPULATION), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs/sh2@data$POPULATION, na.rm=T), alpha = 10)
range(sh2@data$num_dogs/sh2@data$POPULATION,  na.rm=T)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/POPULATION), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs/sh2@data$POPULATION, na.rm=T), alpha = 10)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/POPULATION), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/POPULATION), stroke = T) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/POPULATION), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
sh2@data$POPULATION /10
sh2@data$POPULATION / 100,000
sh2@data$POPULATION / 100000
sh2@data$num_dogs/(sh2@data$POPULATION/100000)
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs/(sh2@data$POPULATION/100000), na.rm=T))
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/(POPULATION/100000), stroke = F) %>%
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/(POPULATION/100000)), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/(POPULATION/100000)), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs/(POPULATION/100000)), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0, 1, POPULATION))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs, na.rm=T))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, opacity =  = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, opacity = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal(10)
pal(100)
pal(1000)
pal(100000)
pal(10000)
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0, 1, POPULATION))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, fillColor = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
View(sh2)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, color =  = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 12) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 10) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal
pal
pal
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$num_dogs, na.rm=T), alpha =  10)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(num_dogs), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
100000%%100000
100000//100000
100000/100000
100007/100000
mutate(., dogs_per_capita = num_dogs/(POPULATION/100000))
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0, 1, POPULATION)) %>%
mutate(., dogs_per_capita = num_dogs/(POPULATION/100000))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$dogs_per_capita, na.rm=T), alpha =  10)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
sh2@data$dogs_per_capita
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0 | is.na(POPULATION), 1, POPULATION)) %>%
mutate(., dogs_per_capita = num_dogs/(POPULATION/100000))
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$dogs_per_capita, na.rm=T), alpha =  10)
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
sh2@data$dogs_per_capita
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$dogs_per_capita, na.rm=T), alpha =  10)
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0 | is.na(POPULATION), 1, POPULATION)) %>%
mutate(., dogs_per_capita = num_dogs/(POPULATION/100000))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
sh2@data
sh2@data$dogs_per_capita
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0 | is.na(POPULATION), 1, POPULATION)) %>%
mutate(., dogs_per_capita = num_dogs/(POPULATION/100000))
sh2@data$dogs_per_capita
sh@data[187]
sh@data[187,]
sh@data[188,]
12/10000
sh2@data$dogs_per_capita[187,]
sh2@data$dogs_per_capita
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0 | is.na(POPULATION), 1, POPULATION)) %>%
mutate(., POPULATION = ifelse(is.na(POPULATION), 1, POPULATION)) %>%
mutate(., dogs_per_capita = num_dogs/(POPULATION/100000))
sh@data[188,]
sh2@data$dogs_per_capita
sh2@data$num_dogs
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$dogs_per_capita, na.rm=T))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
sh2@data$num_dogs
sh2@data$dogs_per_capita
sum(is.na(sh2@data$dogs_per_capita)
sum(is.na(sh2@data$dogs_per_capita))
sum(is.na(sh2@data$dogs_per_capita))
sum(is.na(sh2@data$num_dogs))
is.na(sh2@data$dogs_per_capita)==is.na(sh2@data$num_dogs)
range(sh2@data$dogs_per_capita, na.rm=T)
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$dogs_per_capita, na.rm=T))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
dogs_count
dogs
missing(dogs$ZipCode)
sum(is.na(dogs$ZipCode))
length(unique(dogs$ZipCode))
unique(sh2@data$ZIPCODE)
unique(dogs$ZipCode)
diff(dogs$ZipCode, sh2@data$ZIPCODE)
not_in_shape = c()
for (i in unique(dogs$ZipCode)){
if (!i %in% unique(sh2@data$ZIPCODE)){
not_in_shape = c(not_in_shape, i)
}
}
not_in_shape
not_in_dogs = c()
for (i in unique(sh2@data$ZIPCODE)){
if (!i %in% unique(dogs$ZipCode)){
not_in_dogs = c(not_in_shape, i)
}
}
not_in_dogs
sh2@data$ZIPCODE
sh2@data$ZIPCODE = ndf$ZIPCODE
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$dogs_per_capita, na.rm=T))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
View(ndf)
sh2@data$ZIPCODE = ndf$ZIPCODE
class(sh2@data$ZIPCODE)
View(sh2)
#clean shape file
sh2@data = sh2@data %>%
mutate(., POPULATION = ifelse(POPULATION == 0 | is.na(POPULATION), 1, POPULATION)) %>%
mutate(., POPULATION = ifelse(is.na(POPULATION), 1, POPULATION)) %>%
mutate(., ZIPCODE = as.integer(as.character(ZIPCODE))) %>%
mutate(., dogs_per_capita = num_dogs/(POPULATION/100000))
pal = colorNumeric(palette = "RdPu",
domain = range(sh2@data$dogs_per_capita, na.rm=T))
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = F) %>%
addProviderTiles("CartoDB.Positron")
leaflet(sh2) %>%
addTiles() %>%
setView(-74.00, 40.71, zoom = 11) %>%
addPolygons(popup = ~ZIPCODE, color = ~pal(dogs_per_capita), stroke = T) %>%
addProviderTiles("CartoDB.Positron")
